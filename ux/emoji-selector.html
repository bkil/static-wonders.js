<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8>
  <title>Emoji Selector</title>
<style>

.emoji {
  padding: 1.2em;
  margin: 1em;
  background-color: white;
  border: 1px solid;
  line-height: 1.5em;
}

.emoji span {
  display: inline-block;
  padding: 0.25em;
  width: 1.5em;
  height: 1.5em;
  text-align: center;
}

.emoji span[data-char]:hover::before {
  position: absolute;
  content: attr(data-char);
  font-size: xx-large;
  background-color: white;
  padding: 0.5em;
  margin-left: -0.75em;
  margin-top: -0.5em;
  border: 1px solid;
}

</style>
<body>
  <textarea autofocus></textarea>
  <div class=emoji></div>

<script>
'use strict';

const showEmojiSelector = () => {
  const emoji = document.querySelector('.emoji');
  emoji.innerHTML = getAllEmoji();

  const textarea = document.querySelector('textarea');
  emoji.querySelectorAll('span').forEach((span) => {
    span.onclick = (e) => textarea.value += span.textContent;
  });
};

const getAllEmoji = () => {
  let emoji = '';
  const regexp = /[^\P{Extended_Pictographic}\P{Assigned}\p{Emoji_Component}]/u;
  let last;
  for (let i = 0; i < 0x20000; i++) {
    const char = String.fromCodePoint(i);
    if (regexp.test(char)) {
      if (last && (i !== last + 1)) {
        emoji += `<span>&nbsp;</span> `;
      }
      emoji += `<span data-char="${char}">${char}</span> `;
      last = i;
    }
  }
  return emoji;
};

showEmojiSelector();

</script>
